!function(t){"use strict";function e(){V.style.width=L.expandedWidth,V.style.height=L.frames.reaction.height+"px",V.style.display="block",V.style.border="none",V.style.position="fixed",V.style.background="none rgba(0, 0, 0, 0)",V.style.visibility="visible",V.style.opacity=1,V.style.transition="none",V.style.marginBottom=0}function i(){if("compact"==K.appearance.size)switch(K.position){case"leftBottom":case"rightBottom":V.style.height=L.frames.reaction.height-25+"px",document.getElementById(L.iframeCallToActionID)&&(document.getElementById(L.iframeCallToActionID).style.bottom=L.frames.reaction.height-50+K.offset.bottom+"px"),document.getElementById(L.iframeInteractionsID)&&(document.getElementById(L.iframeInteractionsID).style.bottom=L.frames.reaction.height-50+K.offset.bottom+"px");break;case"leftSide":case"rightSide":V.style.height="240px",V.style.width="64px",document.getElementById(L.iframeCallToActionID)&&(document.getElementById(L.iframeCallToActionID).style["rightSide"==K.position?"right":"left"]="55px"),document.getElementById(L.iframeInteractionsID)&&(document.getElementById(L.iframeInteractionsID).style["rightSide"==K.position?"right":"left"]="55px")}}function s(){G.style.zIndex=K.zIndex,G.style.position="absolute"}function o(){switch(G.style.position="relative",G.style.clear="both",V.style.position="relative",V.style.display="block",V.style.maxWidth="100%",V.style.width="100%",V.style.height=L.frames.reaction.inline.height+"px",V.style.marginTop="-20px",K.position){case"inline":break;case"leftInline":V.style.left="-10px";break;case"rightInline":V.style.right="-10px"}}function n(t){switch(t){case"leftBottom":case"rightBottom":case"leftSide":case"rightSide":default:K.position=t}h()}function a(t){K.offset=j(K.offset,t),h()}function r(t){K.appearance=j(K.appearance,t),i()}function l(t,e){return!(!e&&!(e=document.getElementById(L.iframeInteractionsID)))&&(e.style.position="fixed",e.style.top=0,e.style.bottom="auto",e.style.left=0,e.style.width="100%",e.style.height="100%",e.style.marginLeft=0,void(e.style.zIndex=1e15))}function c(){switch("100%"==V.style.width&&null!=J.style.width&&(V.style.width=J.style.width),K.position){case"rightBottom":default:V.style.top="auto",V.style.left="auto",V.style.right=L.margin+L.safetytMargin+"px",V.style.bottom=L.margin+K.offset.bottom+"px",s();break;case"rightTop":V.style.top=L.margin+"px",V.style.left="auto",V.style.right=L.margin+L.safetytMargin+"px",V.style.bottom="auto",s();break;case"leftBottom":V.style.top="auto",V.style.left=L.margin+L.safetytMargin+"px",V.style.right="auto",V.style.bottom=L.margin+K.offset.bottom+"px",s();break;case"leftTop":V.style.top=L.margin+"px",V.style.right="auto",V.style.left=L.margin+L.safetytMargin+"px",V.style.bottom="auto",s();break;case"inline":case"leftInline":case"rightInline":o();break;case"leftSide":V.style.width=L.sideWidth,V.style.height=L.expandedWidth,V.style.transform="translateY(-50%)",V.style.top="50%",V.style.left=L.margin+"px",V.style.right="auto",V.style.bottom="auto",s();break;case"rightSide":V.style.width=L.sideWidth,V.style.height=L.expandedWidth,V.style.transform="translateY(-50%)",V.style.top="50%",V.style.left="auto",V.style.right=L.margin+"px",V.style.bottom="auto",s()}}function d(){switch("100%"!=V.style.width&&null==J.style.width&&(J.style.width=V.style.width),V.style.width!=L.closedWidth&&(V.style.width="100%"),K.position){case"leftBottom":case"rightBottom":default:V.style.top="auto",V.style.right=0,V.style.left=0,V.style.bottom=L.margin+K.offset.bottom+"px",s();break;case"leftTop":case"rightTop":V.style.top=L.margin+"px",V.style.right=0,V.style.left=0,V.style.bottom="auto",s();break;case"inline":case"leftInline":case"rightInline":o();break;case"leftSide":V.style.width=L.sideWidth,V.style.height=L.expandedWidth,V.style.transform="translateY(-50%)",V.style.top="50%",V.style.left=L.margin+"px",V.style.right="auto",V.style.bottom="auto",s();break;case"rightSide":V.style.width=L.sideWidth,V.style.height=L.expandedWidth,V.style.transform="translateY(-50%)",V.style.top="50%",V.style.left="auto",V.style.right=L.margin+"px",V.style.bottom="auto",s()}}function h(){y()?d():c()}function m(){$.init({debug:K.debug},Z.body),q.addEventListener?q.addEventListener("message",f,!1):q.attachEvent&&q.attachEvent("onmessage",f,!1),q.onresize=function(t){h()}}function f(t){var e=function(){var e=!1;switch(t.origin){case"https://connect.emojics.com":case"http://connect.emojics.com":case"https://feedback.emojics.com":case"http://feedback.emojics.com":e=!0}return e};if(U()||e()){var i=t.data;switch(i.trigger){case"expandWidget":u();break;case"collapseWidget":b();break;case"closeWidget":x();break;case"destroyWidget":I();break;case"initInteraction":w(i);break;case"destroyInteraction":v();break;case"expandInteraction":k(i.message);break;case"collapseInteraction":B();break;case"initCallToAction":W(i.message);break;case"destroyCallToAction":D();break;case"expandCallToAction":E(i.message);break;case"setWidgetHeight":g(i.message);break;case"setWidgetPosition":n(i.message);break;case"setWidgetOffset":a(i.message);break;case"setWidgetAppearance":r(i.message);break;case"setOverlayStyle":l(i.message);break;case"redirect":_(i.message);break;case"event":st(i.message);break;case"lockReaction":var s=document.getElementById(L.iframeReactionsID);s.contentWindow.postMessage({trigger:"lockReaction",message:null},"*");break;case"getDeviceInfo":t.source.window.postMessage({trigger:"getDeviceInfo",message:p()},"*");break;case"getMetaData":t.source.window.postMessage({trigger:"getMetaData",message:T()},"*");break;default:"function"==typeof window[i.trigger]&&window[i.trigger].call(null,i.message)}}}function p(){var t=function(){return q.innerWidth<L.mobileThreshold||q.innerHeight<L.mobileThreshold?"mobile":"desktop"};return{device:{type:t()},screen:{width:screen.width,height:screen.height},window:{width:q.innerWidth,height:q.innerHeight}}}function y(){return q.innerWidth<=L.mobileThreshold-40}function g(t){document.getElementById(L.iframeReactionsID);return"undefined"!=typeof t&&void(P()&&(L.frames.reaction.inline.height=t,o()))}function u(){var t=document.getElementById(L.iframeReactionsID);if(P())return!0;switch(K.position){case"leftSide":case"rightSide":C(t,L.expandedWidth);break;default:S(t,L.expandedWidth)}}function b(){var t=document.getElementById(L.iframeReactionsID);if(P())return!0;switch(K.position){case"leftSide":case"rightSide":C(t,L.collapsedWidth);break;default:S(t,L.collapsedWidth)}}function x(){var t=document.getElementById(L.iframeReactionsID);if(P())return!0;switch(K.position){case"leftSide":case"rightSide":C(t,L.closedWidth);break;default:S(t,L.closedWidth)}}function I(){var t=document.getElementById(L.iframeReactionsID);t&&R(t),G&&G.hasAttribute("style")&&G.removeAttribute("style")}function w(t){var e;if(document.getElementById(L.iframeInteractionsID)&&R(document.getElementById(L.iframeInteractionsID)),e=Z.createElement("iframe"),e.id=L.iframeInteractionsID,e.src=O,U()&&(e.src=F),e.src=e.src+"?widget="+K.widget+"&pageTitle="+K.pageTitle+"&pageUrl="+K.pageUrl+"&widgetPosition="+K.position+"&frame=interaction&reaction="+t.message,K.debug&&(e.src=e.src+"&debug=true"),e.setAttribute("allowTransparency","true"),e.style.width=L.frames.interaction.width+"px",e.style.height=L.frames.interaction.height+"px",e.style.display="block",e.style.border="none",e.style.position="fixed",e.style.background="none rgba(0, 0, 0, 0)",e.style.visibility="visible",e.style.opacity=1,e.style.transition="none",e.style.marginBottom=0,y())switch(e.style.width="100%",K.position){case"leftBottom":case"rightBottom":default:e.style.top="auto",e.style.right=0,e.style.left=0,e.style.bottom=L.frames.reaction.height-25+K.offset.bottom+"px",s();break;case"leftTop":case"rightTop":e.style.top=L.frames.reaction.height-40+"px",e.style.right=0,e.style.left=0,e.style.bottom="auto",s();break;case"inline":case"leftInline":case"rightInline":e.style.position="absolute",e.style.right=0,e.style.left=0,e.style.bottom=L.frames.reaction.inline.height-(L.safetytMargin+15)+"px";break;case"leftSide":e.style.top="50%",e.style.bottom="auto",e.style.left=parseInt(L.sideWidth.replace("px",""))-5+"px",e.style.right=0,e.style.width="calc(100% - "+(parseInt(L.sideWidth.replace("px",""))-5)+"px)",e.style.transform="translateY(-50%)";break;case"rightSide":e.style.top="50%",e.style.bottom="auto",e.style.right=parseInt(L.sideWidth.replace("px",""))-5+"px",e.style.left=0,e.style.width="calc(100% - "+(parseInt(L.sideWidth.replace("px",""))-5)+"px)",e.style.transform="translateY(-50%)"}else switch(K.position){case"rightBottom":default:e.style.top="auto",e.style.right=L.margin+L.safetytMargin+"px",e.style.left="auto",e.style.bottom=L.frames.reaction.height-25+K.offset.bottom+"px";break;case"leftBottom":e.style.top="auto",e.style.left=L.margin+L.safetytMargin+"px",e.style.right="auto",e.style.bottom=L.frames.reaction.height-25+K.offset.bottom+"px";break;case"rightTop":e.style.bottom="auto",e.style.right=L.margin+L.safetytMargin+"px",e.style.left="auto",e.style.top=L.frames.reaction.height-40+"px";break;case"leftTop":e.style.bottom="auto",e.style.left=L.margin+L.safetytMargin+"px",e.style.right="auto",e.style.top=L.frames.reaction.height-40+"px";break;case"inline":case"leftInline":case"rightInline":e.style.position="absolute",e.style.left="50%",e.style.bottom=L.frames.reaction.inline.height-(L.safetytMargin+15)+"px",e.style.marginLeft="-"+L.frames.interaction.width/2+"px";break;case"leftSide":e.style.top="50%",e.style.transform="translateY(-50%)",e.style.left=parseInt(L.sideWidth.replace("px",""))-5+"px",e.style.right="auto",e.style.bottom="auto";break;case"rightSide":e.style.top="50%",e.style.transform="translateY(-50%)",e.style.right=parseInt(L.sideWidth.replace("px",""))-5+"px",e.style.left="auto",e.style.bottom="auto"}var i=document.getElementById(L.iframeReactionsID);G.insertBefore(e,i)}function v(){var t=document.getElementById(L.iframeInteractionsID);t&&R(t)}function k(t){var e=document.getElementById(L.iframeInteractionsID);"undefined"==typeof t&&(t=L.frames.interaction.expandedHeight);var i=q.innerHeight,s=10*parseInt(i/1.5/10);t>s&&(t=s),C(e,t+"px")}function B(){var t=document.getElementById(L.iframeInteractionsID);C(t,L.frames.interaction.height+"px")}function W(t){var e;if(document.getElementById(L.iframeCallToActionID)&&R(document.getElementById(L.iframeCallToActionID)),e=Z.createElement("iframe"),e.id=L.iframeCallToActionID,e.src=O,U()&&(e.src=F),e.src=e.src+"?widget="+K.widget+"&pageTitle="+K.pageTitle+"&pageUrl="+K.pageUrl+"&widgetPosition="+K.position+"&frame=calltoaction",K.textColor&&(e.src=e.src+"&widgetTextColor="+encodeURIComponent(K.textColor)),K.debug&&(e.src=e.src+"&debug=true"),e.setAttribute("allowTransparency","true"),e.style.width=L.frames.calltoaction.width+"px",e.style.height="0px",e.style.display="block",e.style.border="none",e.style.position="fixed",e.style.background="none rgba(0, 0, 0, 0)",e.style.visibility="visible",e.style.opacity=1,e.style.transition="none",e.style.marginBottom=0,y())switch(e.style.width="100%",K.position){case"leftBottom":case"rightBottom":default:e.style.top="auto",e.style.right=0,e.style.left=0,e.style.bottom=L.frames.reaction.height-25+K.offset.bottom+"px",s();break;case"leftTop":case"rightTop":e.style.top=L.frames.reaction.height-40+"px",e.style.right=0,e.style.left=0,e.style.bottom="auto",s();break;case"inline":case"leftInline":case"rightInline":e.style.width="100%",e.style.position="relative",e.style.left=0,e.style.right=0,e.style.bottom="auto";break;case"leftSide":e.style.top="50%",e.style.bottom="auto",e.style.left=parseInt(L.sideWidth.replace("px",""))-5+"px",e.style.right=0,e.style.width="calc(100% - "+(parseInt(L.sideWidth.replace("px",""))-5)+"px)",e.style.transform="translateY(-"+.5*parseInt(L.expandedWidth.replace("px",""))+"px)";break;case"rightSide":e.style.top="50%",e.style.bottom="auto",e.style.right=parseInt(L.sideWidth.replace("px",""))-5+"px",e.style.left=0,e.style.width="calc(100% - "+(parseInt(L.sideWidth.replace("px",""))-5)+"px)",e.style.transform="translateY(-"+.5*parseInt(L.expandedWidth.replace("px",""))+"px)"}else switch(K.position){case"rightBottom":default:e.style.top="auto",e.style.right=L.margin+L.safetytMargin+"px",e.style.left="auto",e.style.bottom=L.frames.reaction.height-25+K.offset.bottom+"px";break;case"leftBottom":e.style.top="auto",e.style.left=L.margin+L.safetytMargin+"px",e.style.right="auto",e.style.bottom=L.frames.reaction.height-25+K.offset.bottom+"px";break;case"rightTop":e.style.bottom="auto",e.style.right=L.margin+L.safetytMargin+"px",e.style.left="auto",e.style.top=L.frames.reaction.height-40+"px";break;case"leftTop":e.style.bottom="auto",e.style.left=L.margin+L.safetytMargin+"px",e.style.right="auto",e.style.top=L.frames.reaction.height-40+"px";break;case"inline":case"leftInline":case"rightInline":e.style.width="100%",e.style.position="relative",e.style.bottom="auto";break;case"leftSide":e.style.top="50%",e.style.transform="translateY(-50%)",e.style.right="auto",e.style.bottom="auto",e.style.left=parseInt(L.sideWidth.replace("px",""))-5+"px";break;case"rightSide":e.style.top="50%",e.style.transform="translateY(-50%)",e.style.left="auto",e.style.bottom="auto",e.style.right=parseInt(L.sideWidth.replace("px",""))-5+"px"}var i=document.getElementById(L.iframeReactionsID);i.contentWindow.postMessage({trigger:"hideActionButton",message:null},"*"),G.insertBefore(e,i)}function D(){var t=document.getElementById(L.iframeCallToActionID);if(t){R(t);var e=document.getElementById(L.iframeReactionsID);e.contentWindow&&e.contentWindow.postMessage({trigger:"showActionButton",message:null},"*")}}function E(t){var e=document.getElementById(L.iframeCallToActionID);"undefined"==typeof t&&(t=L.frames.calltoaction.expandedHeight);var i=q.innerHeight,s=10*parseInt(i/1.5/10);t>s&&(t=s),C(e,t+"px")}function T(){return K.metadata}function S(t,e){var e=parseInt(e.replace("px",""));z&&!Y()?tt.animate(t,e,"width"):t.style.width=e+"px"}function C(t,e){var e=parseInt(e.replace("px",""));z&&!Y()?tt.animate(t,e,"height"):t.style.height=e+"px"}function j(){for(var t=1;t<arguments.length;t++)for(var e in arguments[t])arguments[t].hasOwnProperty(e)&&(arguments[0][e]=arguments[t][e]);return arguments[0]}function A(t){"undefined"==typeof t&&(t=document.location.search),t=t.split("+").join(" ");for(var e,i={},s=/[?&]?([^=]+)=([^&]*)/g;e=s.exec(t);)i[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return i}function M(t,e){"undefined"==typeof e&&(e=document.location.search);var i=A(e);return"undefined"==typeof t?i:"undefined"!=typeof i[t]&&i[t]}function R(t){return!!t&&void t.parentNode.removeChild(t)}function _(t){t.match(/^[a-zA-Z]+:\/\//)||(window.top.location.href="http://"+t),window.top.location.href=t}function P(t){switch(t||(t=K.position),t){case"inline":case"leftInline":case"rightInline":return!0}return!1}function U(){return"DEV_EMOJICS_BROWSERSYNC"==K.widget}function Y(){var t=window.navigator.userAgent,e=t.indexOf("MSIE "),i=t.indexOf("Trident/");return e>0||i>0}var V,z=!0,H="//connect.emojics.com/dist/activation.html",O="//connect.emojics.com/dist/index.html",F="//connect.emojics.com/dist/index.html",L={safetytMargin:15,margin:0,expandedWidth:"300px",collapsedWidth:"190px",closedWidth:"80px",sideWidth:"80px",rootID:"emojics-root",iframeReactionsID:"emojics-widget-reactions",iframeInteractionsID:"emojics-widget-interactions",iframeCallToActionID:"emojics-widget-calltoaction",frames:{reaction:{id:"emojics-widget-reactions",height:135,width:300,inline:{height:145}},interaction:{id:"emojics-widget-interactions",height:80,expandedHeight:250,width:350},calltoaction:{id:"emojics-widget-calltoaction",height:80,expandedHeight:250,width:350,inline:{width:380}}},mobileThreshold:420},N={widget:null,pageUrl:encodeURIComponent(window.location.href),pageTitle:encodeURIComponent(document.title),zIndex:0x48751929482f7,position:!1,slots:null,offset:{bottom:0},textColor:!1,debug:!1,animation:!0,appearance:{size:"default"},metadata:null},Q={reaction_clicked:null,reaction_cancelled:null,interaction_submitted:null},J={triggers:{screenSwitch:!1},style:{width:null}},Z=document,q=window,G=Z.getElementById(L.rootID),K=j(N,t),X=function(t){return"undefined"!=typeof t&&(K=j(K,t)),K=j(K,{pageUrl:encodeURIComponent(q.location.href),pageTitle:encodeURIComponent(Z.title)}),K.widget?(G=Z.getElementById(L.rootID))?(D(),v(),I(),V=Z.createElement("iframe"),V.id=L.iframeReactionsID,V.setAttribute("allowTransparency","true"),V.src=O,U()&&(V.src=F),"check"==M("__emojics")&&(V.src=H),V.src=V.src+"?widget="+K.widget+"&pageTitle="+K.pageTitle+"&pageUrl="+K.pageUrl,V.src=V.src+"&widgetAnimation="+encodeURIComponent(K.animation),K.position&&(V.src=V.src+"&widgetPosition="+K.position),K.slots&&(V.src=V.src+"&widgetSlots="+K.slots),K.debug&&(V.src=V.src+"&debug=true"),G.appendChild(V),e(),h(),void et()):(console.warn('<div id="emojics-root"></div> missing'),!1):(console.warn("No Emojics Widget ID was defined..."),!1)},$={container:null,window:null,defaults:{frame:{id:"emojics-debug",width:"100%",height:"50px",top:0,bottom:"auto",left:0,right:0},debug:!1,content:"You are viewing this top bar because you're currently in Debug Mode. Set the <code>debug</code> propery to false when you're ready to go in production."},settings:{},isActive:function(){return!!this.settings.debug},init:function(t,e,i){return!!e&&(this.container=e,this.window=i||window,this.settings=j(this.defaults,t),!!this.isActive()&&(this.setDebugFrame=this.setDebugFrame.bind(this),console.info("Emojics Debug Mode Active"),this.setDebugFrame(),void setInterval(this.setDebugFrame,1e3)))},setDebugFrame:function(){if(!document.getElementById(this.settings.frame.id)){this.frame=Z.createElement("iframe"),this.frame.id=this.settings.frame.id,this.frame.style.setProperty("width",this.settings.frame.width,"important"),this.frame.style.setProperty("height",this.settings.frame.height,"important"),this.frame.style.setProperty("position","relative","important"),this.frame.style.setProperty("top",this.settings.frame.top,"important"),this.frame.style.setProperty("bottom",this.settings.frame.bottom,"important"),this.frame.style.setProperty("left",this.settings.frame.left,"important"),this.frame.style.setProperty("right",this.settings.frame.right,"important"),this.frame.style.setProperty("display","block","important"),this.frame.style.setProperty("border","none","important"),this.frame.style.setProperty("background","none rgba(255, 255, 255, 1)","important"),this.frame.style.setProperty("visibility","visible","important"),this.frame.style.setProperty("opacity",1,"important"),this.frame.style.setProperty("transition","none","important"),this.container.insertBefore(this.frame,this.container.firstChild);var t='<div style="float:left;width:120px;"><a href="http://www.emojics.com" target="blank"><img style="width:100px;" src="//cdn.emojics.com/v1.0.0/svg/powered-by-emojics.svg" /></a></div>',e='<div style="float:left;width:calc(100% - 120px);line-height:28px;"><span style="text-transform: uppercase;font-weight: 600;">Debug Mode:</span> '+this.settings.content+"</div>",i=this.frame.contentWindow.document;i.open(),i.write('<html><head><title></title></head><body style="margin:10px;font-size:12px;font-family:sans-serif;">'+t+e+"</body></html>"),i.close()}}},tt={_speed:30,_interval:null,el:null,val:null,attr:null,tmpVal:null,dir:null,_init:function(t,e,i){this.el=t,this.val=e,this.attr=i,"height"==i?this.tmpVal=parseInt(t.style.height.replace("px","")):this.tmpVal=parseInt(t.style.width.replace("px","")),this.dir=this.val-this.tmpVal>0?1:-1,this._interval=setInterval(this._animate.bind(this),20)},_destroy:function(){return clearInterval(this._interval),!!this.el&&(this.el.style[this.attr]=this.val+"px",this.el=null,this.val=null,this.attr=null,this.tmpVal=null,this.dir=null,void(this._interval=null))},_animate:function(){if(!this.el)return!1;if(this.dir>0){if(this.tmpVal+this._speed>=this.val)return this._destroy(),!1;this.tmpVal+=this._speed}else{if(this.tmpVal-this._speed<=this.val)return this._destroy(),!1;this.tmpVal-=this._speed}this.el.style[this.attr]=this.tmpVal+"px"},animate:function(t,e,i){this._init(t,e,i)}},et=function(){return"undefined"!=typeof t.events&&void Object.keys(t.events).forEach(function(e,i){it(e,t.events[e])})},it=function(t,e){return"undefined"!=typeof Q[t]&&("function"==typeof e&&(Q[t]=e,!0))},st=function(t){return"undefined"!=typeof t.event&&("undefined"!=typeof Q[t.event]&&("function"==typeof Q[t.event]&&(t.metadata=T(),Q[t.event](t),!0)))},ot=function(){G.style.display="none"},nt=function(){G.style.display="block"};q.emojics=j(q.emojics||{},{init:X,on:it,hide:ot,show:nt}),q.emojics.readyQueue?(X(),m(),q.emojics.readyQueue.forEach(function(t){return"function"==typeof t&&void t()})):q.onload=function(){X(),m()}}(window.emojicsOpts||{});